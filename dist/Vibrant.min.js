(function e$$0(u,y,q){function e(t,b){if(!y[t]){if(!u[t]){var d="function"==typeof require&&require;if(!b&&d)return d(t,!0);if(h)return h(t,!0);d=Error("Cannot find module '"+t+"'");throw d.code="MODULE_NOT_FOUND",d;}d=y[t]={exports:{}};u[t][0].call(d.exports,function(c){var a=u[t][1][c];return e(a?a:c)},d,d.exports,e$$0,u,y,q)}return y[t].exports}for(var h="function"==typeof require&&require,x=0;x<q.length;x++)e(q[x]);return e})({1:[function(z,u,y){if(!q)var q={map:function(e,h){var q={};return h?
e.map(function(e,b){q.index=b;return h.call(q,e)}):e.slice()},naturalOrder:function(e,h){return e<h?-1:e>h?1:0},sum:function(e,h){var q={};return e.reduce(h?function(e,b,d){q.index=d;return e+h.call(q,b)}:function(e,b){return e+b},0)},max:function(e,h){return Math.max.apply(null,h?q.map(e,h):e)}};z=function(){function e(c){function a(){n.sort(c);d=!0}var n=[],d=!1;return{push:function(a){n.push(a);d=!1},peek:function(c){d||a();void 0===c&&(c=n.length-1);return n[c]},pop:function(){d||a();return n.pop()},
size:function(){return n.length},map:function(a){return n.map(a)},debug:function(){d||a();return n}}}function h(c,a,d,b,g,f,k){this.r1=c;this.r2=a;this.g1=d;this.g2=b;this.b1=g;this.b2=f;this.histo=k}function x(){this.vboxes=new e(function(c,a){return q.naturalOrder(c.vbox.count()*c.vbox.volume(),a.vbox.count()*a.vbox.volume())})}function t(c){var a=Array(32768),d,b,g,f;c.forEach(function(c){b=c[0]>>3;g=c[1]>>3;f=c[2]>>3;d=(b<<10)+(g<<5)+f;a[d]=(a[d]||0)+1});return a}function b(c,a){var d=1E6,b=0,
g=1E6,f=0,k=1E6,m=0,w,l,p;c.forEach(function(a){w=a[0]>>3;l=a[1]>>3;p=a[2]>>3;w<d?d=w:w>b&&(b=w);l<g?g=l:l>f&&(f=l);p<k?k=p:p>m&&(m=p)});return new h(d,b,g,f,k,m,a)}function d(c,a){function d(c){var b=c+"1";c+="2";var n,f,g,v;f=0;for(l=a[b];l<=a[c];l++)if(m[l]>k/2){g=a.copy();v=a.copy();n=l-a[b];f=a[c]-l;for(n=n<=f?Math.min(a[c]-1,~~(l+f/2)):Math.max(a[b],~~(l-1-n/2));!m[n];)n++;for(f=w[n];!f&&m[n-1];)f=w[--n];g[c]=n;v[b]=g[c]+1;return[g,v]}}if(a.count()){var b=a.r2-a.r1+1,g=a.g2-a.g1+1,f=q.max([b,
g,a.b2-a.b1+1]);if(1==a.count())return[a.copy()];var k=0,m=[],w=[],l,p,e,r,h;if(f==b)for(l=a.r1;l<=a.r2;l++){r=0;for(p=a.g1;p<=a.g2;p++)for(e=a.b1;e<=a.b2;e++)h=(l<<10)+(p<<5)+e,r+=c[h]||0;k+=r;m[l]=k}else if(f==g)for(l=a.g1;l<=a.g2;l++){r=0;for(p=a.r1;p<=a.r2;p++)for(e=a.b1;e<=a.b2;e++)h=(p<<10)+(l<<5)+e,r+=c[h]||0;k+=r;m[l]=k}else for(l=a.b1;l<=a.b2;l++){r=0;for(p=a.r1;p<=a.r2;p++)for(e=a.g1;e<=a.g2;e++)h=(p<<10)+(e<<5)+l,r+=c[h]||0;k+=r;m[l]=k}m.forEach(function(a,c){w[c]=k-a});return f==b?d("r"):
f==g?d("g"):d("b")}}h.prototype={volume:function(c){if(!this._volume||c)this._volume=(this.r2-this.r1+1)*(this.g2-this.g1+1)*(this.b2-this.b1+1);return this._volume},count:function(c){var a=this.histo;if(!this._count_set||c){c=0;var d,b,g;for(d=this.r1;d<=this.r2;d++)for(b=this.g1;b<=this.g2;b++)for(g=this.b1;g<=this.b2;g++)index=(d<<10)+(b<<5)+g,c+=a[index]||0;this._count=c;this._count_set=!0}return this._count},copy:function(){return new h(this.r1,this.r2,this.g1,this.g2,this.b1,this.b2,this.histo)},
avg:function(c){var a=this.histo;if(!this._avg||c){var d=c=0,b=0,g=0,f,k,m,e;for(k=this.r1;k<=this.r2;k++)for(m=this.g1;m<=this.g2;m++)for(e=this.b1;e<=this.b2;e++)f=(k<<10)+(m<<5)+e,f=a[f]||0,c+=f,d+=f*(k+.5)*8,b+=f*(m+.5)*8,g+=f*(e+.5)*8;this._avg=c?[~~(d/c),~~(b/c),~~(g/c)]:[~~(8*(this.r1+this.r2+1)/2),~~(8*(this.g1+this.g2+1)/2),~~(8*(this.b1+this.b2+1)/2)]}return this._avg},contains:function(c){var a=c[0]>>3;gval=c[1]>>3;bval=c[2]>>3;return a>=this.r1&&a<=this.r2&&gval>=this.g1&&gval<=this.g2&&
bval>=this.b1&&bval<=this.b2}};x.prototype={push:function(c){this.vboxes.push({vbox:c,color:c.avg()})},palette:function(){return this.vboxes.map(function(c){return c.color})},size:function(){return this.vboxes.size()},map:function(c){for(var a=this.vboxes,d=0;d<a.size();d++)if(a.peek(d).vbox.contains(c))return a.peek(d).color;return this.nearest(c)},nearest:function(c){for(var a=this.vboxes,d,b,g,f=0;f<a.size();f++)if(b=Math.sqrt(Math.pow(c[0]-a.peek(f).color[0],2)+Math.pow(c[1]-a.peek(f).color[1],
2)+Math.pow(c[2]-a.peek(f).color[2],2)),b<d||void 0===d)d=b,g=a.peek(f).color;return g},forcebw:function(){var c=this.vboxes;c.sort(function(a,c){return q.naturalOrder(q.sum(a.color),q.sum(c.color))});var a=c[0].color;5>a[0]&&5>a[1]&&5>a[2]&&(c[0].color=[0,0,0]);var a=c.length-1,d=c[a].color;251<d[0]&&251<d[1]&&251<d[2]&&(c[a].color=[255,255,255])}};return{quantize:function(c,a){function n(a,c){for(var b=1,f=0,n;1E3>f;)if(n=a.pop(),n.count()){var g=d(v,n);n=g[0];g=g[1];if(!n)break;a.push(n);g&&(a.push(g),
b++);if(b>=c)break;if(1E3<f++)break}else a.push(n),f++}if(!c.length||2>a||256<a)return!1;var v=t(c),g=0;v.forEach(function(){g++});var f=b(c,v),k=new e(function(a,c){return q.naturalOrder(a.count(),c.count())});k.push(f);n(k,.75*a);for(f=new e(function(a,c){return q.naturalOrder(a.count()*a.volume(),c.count()*c.volume())});k.size();)f.push(k.pop());n(f,a-f.size());for(k=new x;f.size();)k.push(f.pop());return k}}}();u.exports=z.quantize},{}],2:[function(z,u,y){(function(){var q,e,h,x=function(b,d){return function(){return b.apply(d,
arguments)}},t=[].slice;window.Swatch=e=function(){function b(d,c){this.rgb=d;this.population=c}b.prototype.hsl=void 0;b.prototype.rgb=void 0;b.prototype.population=1;b.yiq=0;b.prototype.getHsl=function(){return this.hsl?this.hsl:this.hsl=h.rgbToHsl(this.rgb[0],this.rgb[1],this.rgb[2])};b.prototype.getPopulation=function(){return this.population};b.prototype.getRgb=function(){return this.rgb};b.prototype.getHex=function(){return"#"+(16777216+(this.rgb[0]<<16)+(this.rgb[1]<<8)+this.rgb[2]).toString(16).slice(1,
7)};b.prototype.getTitleTextColor=function(){this._ensureTextColors();return 200>this.yiq?"#fff":"#000"};b.prototype.getBodyTextColor=function(){this._ensureTextColors();return 150>this.yiq?"#fff":"#000"};b.prototype._ensureTextColors=function(){if(!this.yiq)return this.yiq=(299*this.rgb[0]+587*this.rgb[1]+114*this.rgb[2])/1E3};return b}();window.Vibrant=h=function(){function b(d,c,a){this.swatches=x(this.swatches,this);var b,v,g,f,k,m,h,l,p,t,r,u;"undefined"===typeof c&&(c=64);"undefined"===typeof a&&
(a=5);try{h=new q(d);l=h.getImageData();r=l.data;t=h.getPixelCount();v=[];for(m=0;m<t;)p=4*m,u=r[p+0],k=r[p+1],g=r[p+2],b=r[p+3],125<=b&&(250<u&&250<k&&250<g||v.push([u,k,g])),m+=a;f=this.quantize(v,c);this._swatches=f.vboxes.map(function(a){return function(a){return new e(a.color,a.vbox.count())}}(this));this.maxPopulation=this.findMaxPopulation;this.generateVarationColors();this.generateEmptySwatches()}finally{h&&h.removeCanvas()}}b.prototype.quantize=z("quantize");b.prototype._swatches=[];b.prototype.TARGET_DARK_LUMA=
.26;b.prototype.MAX_DARK_LUMA=.45;b.prototype.MIN_LIGHT_LUMA=.55;b.prototype.TARGET_LIGHT_LUMA=.74;b.prototype.MIN_NORMAL_LUMA=.3;b.prototype.TARGET_NORMAL_LUMA=.5;b.prototype.MAX_NORMAL_LUMA=.7;b.prototype.TARGET_MUTED_SATURATION=.3;b.prototype.MAX_MUTED_SATURATION=.4;b.prototype.TARGET_VIBRANT_SATURATION=1;b.prototype.MIN_VIBRANT_SATURATION=.35;b.prototype.WEIGHT_SATURATION=3;b.prototype.WEIGHT_LUMA=6;b.prototype.WEIGHT_POPULATION=1;b.prototype.VibrantSwatch=void 0;b.prototype.MutedSwatch=void 0;
b.prototype.DarkVibrantSwatch=void 0;b.prototype.DarkMutedSwatch=void 0;b.prototype.LightVibrantSwatch=void 0;b.prototype.LightMutedSwatch=void 0;b.prototype.HighestPopulation=0;b.prototype.generateVarationColors=function(){this.VibrantSwatch=this.findColorVariation(this.TARGET_NORMAL_LUMA,this.MIN_NORMAL_LUMA,this.MAX_NORMAL_LUMA,this.TARGET_VIBRANT_SATURATION,this.MIN_VIBRANT_SATURATION,1);this.LightVibrantSwatch=this.findColorVariation(this.TARGET_LIGHT_LUMA,this.MIN_LIGHT_LUMA,1,this.TARGET_VIBRANT_SATURATION,
this.MIN_VIBRANT_SATURATION,1);this.DarkVibrantSwatch=this.findColorVariation(this.TARGET_DARK_LUMA,0,this.MAX_DARK_LUMA,this.TARGET_VIBRANT_SATURATION,this.MIN_VIBRANT_SATURATION,1);this.MutedSwatch=this.findColorVariation(this.TARGET_NORMAL_LUMA,this.MIN_NORMAL_LUMA,this.MAX_NORMAL_LUMA,this.TARGET_MUTED_SATURATION,0,this.MAX_MUTED_SATURATION);this.LightMutedSwatch=this.findColorVariation(this.TARGET_LIGHT_LUMA,this.MIN_LIGHT_LUMA,1,this.TARGET_MUTED_SATURATION,0,this.MAX_MUTED_SATURATION);return this.DarkMutedSwatch=
this.findColorVariation(this.TARGET_DARK_LUMA,0,this.MAX_DARK_LUMA,this.TARGET_MUTED_SATURATION,0,this.MAX_MUTED_SATURATION)};b.prototype.generateEmptySwatches=function(){var d;void 0===this.VibrantSwatch&&void 0!==this.DarkVibrantSwatch&&(d=this.DarkVibrantSwatch.getHsl(),d[2]=this.TARGET_NORMAL_LUMA,this.VibrantSwatch=new e(b.hslToRgb(d[0],d[1],d[2]),0));if(void 0===this.DarkVibrantSwatch&&void 0!==this.VibrantSwatch)return d=this.VibrantSwatch.getHsl(),d[2]=this.TARGET_DARK_LUMA,this.DarkVibrantSwatch=
new e(b.hslToRgb(d[0],d[1],d[2]),0)};b.prototype.findMaxPopulation=function(){var d,c,a,b,e;a=0;b=this._swatches;d=0;for(c=b.length;d<c;d++)e=b[d],a=Math.max(a,e.getPopulation());return a};b.prototype.findColorVariation=function(d,c,a,b,e,g){var f,k,m,h,l,p,q,r;h=void 0;l=0;p=this._swatches;f=0;for(k=p.length;f<k;f++)if(r=p[f],q=r.getHsl()[1],m=r.getHsl()[2],q>=e&&q<=g&&m>=c&&m<=a&&!this.isAlreadySelected(r)&&(m=this.createComparisonValue(q,b,m,d,r.getPopulation(),this.HighestPopulation),void 0===
h||m>l))h=r,l=m;return h};b.prototype.createComparisonValue=function(d,c,a,b,e,g){return this.weightedMean(this.invertDiff(d,c),this.WEIGHT_SATURATION,this.invertDiff(a,b),this.WEIGHT_LUMA,e/g,this.WEIGHT_POPULATION)};b.prototype.invertDiff=function(d,c){return 1-Math.abs(d-c)};b.prototype.weightedMean=function(){var d,c,a,b,e,g;e=1<=arguments.length?t.call(arguments,0):[];for(d=a=c=0;d<e.length;)b=e[d],g=e[d+1],c+=b*g,a+=g,d+=2;return c/a};b.prototype.swatches=function(){return{Vibrant:this.VibrantSwatch,
Muted:this.MutedSwatch,DarkVibrant:this.DarkVibrantSwatch,DarkMuted:this.DarkMutedSwatch,LightVibrant:this.LightVibrantSwatch,LightMuted:this.LightMuted}};b.prototype.isAlreadySelected=function(b){return this.VibrantSwatch===b||this.DarkVibrantSwatch===b||this.LightVibrantSwatch===b||this.MutedSwatch===b||this.DarkMutedSwatch===b||this.LightMutedSwatch===b};b.rgbToHsl=function(b,c,a){var e,h,g,f,k;b/=255;c/=255;a/=255;f=Math.max(b,c,a);k=Math.min(b,c,a);h=void 0;g=(f+k)/2;if(f===k)h=k=0;else{e=f-
k;k=.5<g?e/(2-f-k):e/(f+k);switch(f){case b:h=(c-a)/e+(c<a?6:0);break;case c:h=(a-b)/e+2;break;case a:h=(b-c)/e+4}h/=6}return[h,k,g]};b.hslToRgb=function(b,c,a){var e,h,g;e=h=g=void 0;e=function(a,b,c){0>c&&(c+=1);1<c&&--c;return c<1/6?a+6*(b-a)*c:.5>c?b:c<2/3?a+(b-a)*(2/3-c)*6:a};0===c?g=h=e=a:(c=.5>a?a*(1+c):a+c-a*c,a=2*a-c,g=e(a,c,b+1/3),h=e(a,c,b),e=e(a,c,b-1/3));return[255*g,255*h,255*e]};return b}();window.CanvasImage=q=function(){function b(b){this.canvas=document.createElement("canvas");this.context=
this.canvas.getContext("2d");document.body.appendChild(this.canvas);this.width=this.canvas.width=b.width;this.height=this.canvas.height=b.height;this.context.drawImage(b,0,0,this.width,this.height)}b.prototype.clear=function(){return this.context.clearRect(0,0,this.width,this.height)};b.prototype.update=function(b){return this.context.putImageData(b,0,0)};b.prototype.getPixelCount=function(){return this.width*this.height};b.prototype.getImageData=function(){return this.context.getImageData(0,0,this.width,
this.height)};b.prototype.removeCanvas=function(){return this.canvas.parentNode.removeChild(this.canvas)};return b}()}).call(this)},{quantize:1}]},{},[2]);
